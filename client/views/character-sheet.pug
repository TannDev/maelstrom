extends layout

mixin dots(total, filled)
  - var n = 0;
  while n < total
    div(class=`dot ${n < filled ? 'filled' : 'empty'}`)
    - n++;

mixin trait(trait)
  div.character-trait
    div.character-trait-name
      // TODO Put the documentation link into the class instead of hardcoded here.
      a(href=`/documentation/rules#${trait.name.toLowerCase().replace(/[^\w]+/g, '-')}` target='_blank')=trait.name
    div.character-trait-dots
      +dots(5, trait.dots)
  if trait.specialties
    div.character-trait-specialties
      each specialty in trait.specialties
        div.character-trait-specialty=specialty

mixin trait-category(group, category)
  div.character-trait-category
    div.header=category
    each trait in group[category]
      +trait(trait)

block content
  style
    include ../styles/character-sheet.css

  div.character-sheet
    div.character-sheet-top
      div.header Maelstrom
      div.character-information
        div.item
          div.label Name:
          div.field=character.name
        div.item
          div.label Concept:
          div.field=character.concept
        div.item
          div.label Campaign:
          div.field=character.campaign
    div.character-sheet-section
      div.header Attributes
      div.character-trait-group
        +trait-category(character.attributes, 'physical')
        +trait-category(character.attributes, 'mental')
    div.character-sheet-section
      div.header Abilities
      div.character-trait-group
        +trait-category(character.abilities, 'talents')
        +trait-category(character.abilities, 'skills')
        +trait-category(character.abilities, 'knowledges')
